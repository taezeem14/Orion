<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Browser</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link rel="stylesheet" href="styles/animations.css">
</head>
<body>
    <!-- Main App Container -->
    <div id="app" class="app-container">
        
        <!-- Sidebar (Optional - can toggle) -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    <span class="logo-text">AI Browser</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="browser">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <path d="M3 9h18"/>
                    </svg>
                    <span>Browser</span>
                </button>
                <button class="nav-item" data-view="history">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    <span>History</span>
                </button>
                <button class="nav-item" data-view="bookmarks">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                    </svg>
                    <span>Bookmarks</span>
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <button class="nav-item" id="settingsBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/>
                    </svg>
                    <span>Settings</span>
                </button>
                <div class="user-profile" id="userProfile">
                    <div class="avatar">U</div>
                    <span class="username">Guest</span>
                </div>
            </div>
        </aside>

        <!-- Main Browser Area -->
        <main id="mainContent" class="main-content">
            
            <!-- Browser Chrome -->
            <div class="browser-chrome">
                <!-- Tab Strip -->
                <div class="tab-strip" id="tabStrip">
                    <div class="tabs-container" id="tabsContainer">
                        <!-- Tabs render here dynamically -->
                    </div>
                    <button class="new-tab-btn" id="newTabBtn" title="New Tab (Ctrl+T)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                    </button>
                </div>

                <!-- Navigation Bar -->
                <div class="nav-bar">
                    <div class="nav-controls">
                        <button class="nav-btn" id="backBtn" title="Back">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5M12 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <button class="nav-btn" id="forwardBtn" title="Forward">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                        <button class="nav-btn" id="refreshBtn" title="Refresh">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                            </svg>
                        </button>
                    </div>

                    <div class="address-bar-container">
                        <div class="address-bar" id="addressBar">
                            <div class="address-icon" id="secureIcon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                            </div>
                            <input 
                                type="text" 
                                id="addressInput" 
                                class="address-input" 
                                placeholder="Search or enter URL..."
                                autocomplete="off"
                                spellcheck="false"
                            />
                            <button class="address-clear" id="clearAddressBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M15 9l-6 6M9 9l6 6"/>
                                </svg>
                            </button>
                        </div>
                        <!-- Suggestions Dropdown -->
                        <div class="suggestions-dropdown" id="suggestionsDropdown"></div>
                    </div>

                    <div class="nav-actions">
                        <button class="nav-btn" id="aiSearchBtn" title="AI Search">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                                <line x1="12" y1="19" x2="12" y2="22"/>
                            </svg>
                        </button>
                        <button class="nav-btn" id="splitViewBtn" title="Split View">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <line x1="12" y1="3" x2="12" y2="21"/>
                            </svg>
                        </button>
                        <button class="nav-btn" id="aiAssistantBtn" title="AI Assistant">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area" id="contentArea">
                <!-- Viewport Container -->
                <div class="viewport-container" id="viewportContainer">
                    <div class="viewport" id="viewport">
                        <!-- Web content renders here -->
                    </div>
                </div>

                <!-- AI Assistant Panel (Collapsible) -->
                <aside class="ai-panel" id="aiPanel">
                    <div class="ai-panel-header">
                        <div class="ai-panel-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                            <span>AI Assistant</span>
                        </div>
                        <div class="ai-panel-actions">
                            <select id="aiModeSelect" class="ai-mode-select">
                                <option value="chat">Chat</option>
                                <option value="search">AI Search</option>
                                <option value="explain">Explain Page</option>
                                <option value="ask">Ask About Page</option>
                                <option value="compare">Compare Tabs</option>
                                <option value="code">Coding Assistant</option>
                                <option value="research">Research Mode</option>
                            </select>
                            <button class="panel-close" id="closeAIPanel">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="ai-panel-content">
                        <div class="ai-messages" id="aiMessages">
                            <!-- AI messages render here -->
                        </div>
                        <div class="ai-input-container">
                            <textarea 
                                id="aiInput" 
                                class="ai-input" 
                                placeholder="Ask AI anything..."
                                rows="1"
                            ></textarea>
                            <button class="ai-send-btn" id="aiSendBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"/>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </aside>
            </div>

            <!-- Loading Overlay -->
            <div class="loading-overlay" id="loadingOverlay">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading...</p>
            </div>
        </main>
    </div>

    <!-- Command Palette (Ctrl+K) -->
    <div class="command-palette" id="commandPalette">
        <div class="command-palette-container">
            <div class="command-search">
                <svg class="command-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <input 
                    type="text" 
                    id="commandInput" 
                    class="command-input" 
                    placeholder="Search commands, tabs, history..."
                    autocomplete="off"
                />
            </div>
            <div class="command-results" id="commandResults">
                <!-- Command results render here -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close" id="closeSettingsModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-content">
                <div class="settings-section">
                    <h3>AI Configuration</h3>
                    <div class="form-group">
                        <label for="apiKeyInput">OpenRouter API Key</label>
                        <div class="input-with-toggle">
                            <input 
                                type="password" 
                                id="apiKeyInput" 
                                class="settings-input" 
                                placeholder="sk-or-v1-..."
                            />
                            <button class="toggle-visibility" id="toggleApiKey">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                            </button>
                        </div>
                        <small>Your API key is stored locally and never sent to our servers</small>
                    </div>
                    <div class="form-group">
                        <label for="modelSelect">Default AI Model</label>
                        <select id="modelSelect" class="settings-select">
                            <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                            <option value="openai/gpt-4-turbo">GPT-4 Turbo</option>
                            <option value="google/gemini-pro-1.5">Gemini Pro 1.5</option>
                            <option value="meta-llama/llama-3.1-70b-instruct">Llama 3.1 70B</option>
                            <option value="mistralai/mistral-large">Mistral Large</option>
                            <option value="deepseek/deepseek-chat">DeepSeek Chat</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Appearance</h3>
                    <div class="form-group">
                        <label>Theme</label>
                        <div class="theme-selector">
                            <button class="theme-option active" data-theme="light">
                                <span class="theme-preview light"></span>
                                Light
                            </button>
                            <button class="theme-option" data-theme="dark">
                                <span class="theme-preview dark"></span>
                                Dark
                            </button>
                            <button class="theme-option" data-theme="auto">
                                <span class="theme-preview auto"></span>
                                Auto
                            </button>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Privacy & Data</h3>
                    <div class="form-group">
                        <button class="danger-btn" id="clearDataBtn">Clear All Browsing Data</button>
                        <small>This will delete history, bookmarks, and AI conversations</small>
                    </div>
                    <div class="form-group">
                        <button class="secondary-btn" id="exportDataBtn">Export Data</button>
                        <small>Download your data as JSON</small>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Account</h3>
                    <div class="form-group">
                        <button class="primary-btn" id="logoutBtn">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-container auth-modal">
            <div class="auth-header">
                <h1>Welcome to AI Browser</h1>
                <p>Sign in to sync your tabs, history, and AI conversations</p>
            </div>
            <div class="auth-forms">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="auth-input" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="auth-input" required>
                    </div>
                    <button type="submit" class="primary-btn full-width">Sign In</button>
                    <p class="auth-switch">
                        Don't have an account? <a href="#" id="showSignup">Sign up</a>
                    </p>
                </form>

                <!-- Signup Form -->
                <form id="signupForm" class="auth-form">
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" class="auth-input" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" class="auth-input" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPasswordConfirm">Confirm Password</label>
                        <input type="password" id="signupPasswordConfirm" class="auth-input" required>
                    </div>
                    <button type="submit" class="primary-btn full-width">Create Account</button>
                    <p class="auth-switch">
                        Already have an account? <a href="#" id="showLogin">Sign in</a>
                    </p>
                </form>

                <button class="secondary-btn full-width" id="continueAsGuest">Continue as Guest</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script type="module" src="scripts/app.js"></script>
</body>
</html>
